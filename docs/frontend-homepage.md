# ThinkingMap 前端：首页问题输入与初步分析

## 1. 整体布局
- 首页采用侧边栏主布局（SidebarLayout），左侧为全局菜单，右侧为首页主内容区。
- 主内容区分为：
  - 顶部欢迎/产品简介区域（可选）
  - **问题输入区**（核心）
  - 历史问题快捷入口/列表
  - 产品亮点/引导说明（可选）

## 2. 问题输入区结构
- **多行文本输入框**：用于输入待分析的问题，支持粘贴、换行，自动聚焦。
- **问题类型选择**：下拉菜单或单选按钮，类型如"研究型/创意型/分析型/规划型"，与后端`problem_type`字段对应。
- **字数提示/建议**：实时显示当前字数，推荐范围（如50-200字），超限时高亮提示。
- **历史问题下拉**：可快速选择最近提交过的问题，支持搜索。
- **提交按钮**：高亮显示，输入有效时可用。
- **辅助说明**：如"请尽量描述清楚你的问题和目标"提示。

## 3. 交互与初步分析流程
1. 用户输入问题、选择类型，点击"提交"或"开始分析"。
2. 前端校验输入（字数、必填、类型等），通过后请求后端分析接口（如`POST /api/thinking/analyze`）。
3. 后端返回问题要点、目标、约束等初步分析结果。
4. 前端弹出/展示"系统理解确认区"：
   - 显示系统提取的核心要点、目标、约束
   - 用户可编辑/修正系统理解
   - 确认无误后点击"进入工作区"
5. 跳转到工作区（/map/[id]），初始化可视化图。

## 4. 与后端数据结构的映射
- `thinking_maps`表：
  - `problem`：用户输入的问题文本
  - `problem_type`：类型选择
  - `key_points`、`constraints`：后端分析提取的要点、约束
  - `target`：目标描述
- 初步分析结果通过API返回，前端展示并允许用户修正后再提交。

## 5. 样式与体验建议
- 问题输入区居中大卡片布局，突出主输入区域
- 输入框、下拉、按钮等使用shadcn/ui组件，Tailwind实现间距、圆角、阴影
- 字数提示、类型选择、历史下拉等辅助信息紧凑排列，便于快速操作
- 系统理解确认区采用弹窗或卡片，内容分区清晰，编辑区与只读区区分明显
- 错误提示、校验反馈即时、友好
- 支持键盘操作（回车提交、Tab切换等）

## 6. 推荐代码结构
- `HomePage.tsx`：首页主页面
- `QuestionInputCard.tsx`：问题输入卡片组件
- `ProblemTypeSelect.tsx`：类型选择组件
- `HistoryDropdown.tsx`：历史问题下拉组件
- `AnalyzeConfirmDialog.tsx`：系统理解确认弹窗/卡片
- `homeStore.ts`：首页相关状态管理

## 7. 示例布局（伪代码）
```jsx
<SidebarLayout>
  <div className="home-main">
    <QuestionInputCard>
      <Textarea ... />
      <ProblemTypeSelect ... />
      <HistoryDropdown ... />
      <CharCountHint ... />
      <Button>开始分析</Button>
    </QuestionInputCard>
    <AnalyzeConfirmDialog ... />
    <HistoryList ... />
  </div>
</SidebarLayout>
```

## 8. 其他建议
- 支持粘贴富文本自动转纯文本
- 历史问题可一键复用/编辑后再提交
- 首页可扩展为产品入口、引导页、FAQ等 